{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <style>
  
  .checked{
      color: orange;
  }

.plants-box {
     background-color: #fff;
     box-shadow: #dcd8d8 0px 1px 3px 0px;
     margin-bottom: 30px;
}
.plants .plants-box figure {
     margin: 0px;
}
.plants .plants-box figure img {
     width: 100%;
     margin-top: 10px;
}
.plants .plants-box h3 {
     font-size: 30px;
     line-height: 36px;
     font-weight: 600;
     padding: 16px 20px 6px 20px;
     color: #0d0e0a;
}
 p {
     font-size: 17px;
     line-height: 30px;
     padding: 0px 20px 14px 20px;
     color: #0d0e0a;
}
button{
    background-color: inherit !important;
    border:0px !important;
  
}
.rating{
    width: 180px;
}
.rating_star{
    cursor: pointer;
    color:#dadb18b2
}
#rating { font-size: 0; }
#rating span { font-size: 40px; }
#rating span::before { content: "☆"; }
#rating span.active::before {content: "★"; }
#rating span:hover { cursor: pointer; color: #fd4; }
.star-widget label{
  font-size: 40px;
  color: #444;
  padding: 10px;
  float: right;
  transition: all 0.2s ease;
}
 input:not(:checked) ~ label:hover,
input:not(:checked) ~ label:hover ~ label{
  color: #fd4;
}
/*
input:checked ~ label{
  color: #fd4;
}
input#rate-5:checked ~ label{
  color: #fe7;
  text-shadow: 0 0 20px #952;
}
#rate-1:checked ~ form header:before{
  content: "I just hate it ";
}
#rate-2:checked ~ form header:before{
  content: "I don't like it ";
}
#rate-3:checked ~ form header:before{
  content: "It is awesome ";
}
#rate-4:checked ~ form header:before{
  content: "I just like it ";
}
#rate-5:checked ~ form header:before{
  content: "I just love it ";
}
.container form{
  display: none;
}
input:checked ~ form{
  display: block;
} */
      </style>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Greeno</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
      <!-- style css -->
      <link rel="stylesheet" href="{% static 'css/style.css' %}">
      <!-- Responsive-->
      <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
      <link rel="stylesheet" href="{% static 'fontawesome.min.css' %}">
      <!-- fevicon -->
      <link rel="icon" href="{% static 'images/fevicon.png' %}" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- owl stylesheets --> 
      <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
      <!-- <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}"> -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <script src="{% static 'jquery.min.js' %}"></script>
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
   </head>
   <!-- body -->
   <body class="main-layout">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="{% static 'images/loading.gif' %}" alt="#" /></div>
      </div>
      <!-- end loader -->
      <!-- header -->
     
         <!-- header inner -->
         <div class="header">
            <div class="container">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo"> <a href="index.html"><img src="{% static 'images/logo.png' %}" alt="#"></a> </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <div class="menu-area">
                        <div class="limit-box">
                           <nav class="main-menu">
                              <ul class="menu-area-main">
                                <li class="active"> <a href="{% url 'e_nursery:cust_home' %}">Home</a> </li>
                                <li> <a href="{% url 'e_nursery:cust_home' %}">Password</a> </li>
                                <li><a href="{% url 'e_nursery:login' %}">Profile</a></li>
                                <li><a href="{% url 'e_nursery:cart' %}">Cart</a></li>
                                <li><a href="{% url 'e_nursery:cust_orders' %}">My Orders</a></li>
                                <li><a href="#contact">Logout</a></li>
                                <!-- <li class="last"><a href="#"><img src="{% static 'images/search_icon.png' %}" alt="icon"/></a></li> -->
                              </ul>
                           </nav>
                        </div>
                     </div>
                  </div>
                </div>


                  <div style="margin-top: 40px;">
                    <div class="container" >
                             
                        <div class="col-md-12">
                          {% if not data %}
                            <form action="{% url 'e_nursery:feedback_craft' %}" style="background-color: white;" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="status" value="{{status}}" id=""> 
                                <input type="hidden" name="prod" value={{id}} id="sel_product">
                                <input type="hidden" name="type" value="{{p_type}}">
                                <span class="h4 text-success alert-success" style="height: 50px; margin-left: 340px ;" id="txt-msg"></span>
          
                                <table style="margin-left: 200px;border-spacing: 20px;border-collapse: separate;">
                                    
                                  <tr>
                                    <td>Your Rating</td>
                                    <td>
                                      
                                      

                                          <div name="dv">
                                            <form id=doRating >
                                               <button type="button" formnovalidate name="star1" class="fa fa-star fa-2x  checked" value="1" id="first"></button>
                                               <button type="button" formnovalidate  name="star2" class="fa fa-star fa-2x  checked" value="2" id="second"></button>
                                               <button type="button" formnovalidate  name="star3"  class="fa fa-star fa-2x checked" value="3" id="third"></button>
                                               <button type="button" formnovalidate  name="star4"  class="fa fa-star fa-2x  checked" value="4" id="fourth"></button>
                                               <button type="button" formnovalidate  name="star15"  class="fa fa-star fa-2x  checked" value="5" id="fifth"></button>
                                              <input type="hidden" name="starCount" id="starCount">
                                              </form>
                                            </div>

                                    </td>
                                </tr>
                                  
                                  <tr>
                                        <td>Feedback</td>
                                        <td>
                                          <textarea name="feed_back" required id="" cols="30" rows="10"></textarea>
                                        </td>
                                    </tr>
<tr>
  <td>Upload Image (optional) </td>
  <td><input type="file" name="pic" id="" class="form-control"></td>
</tr>
                                    <tr>
                                    <td></td>
                                        
                                        
                                        <td><input class="btn btn-primary" type="submit" value="Submit" ></td>
                                    </tr>
                                </table>
                                </form>  





                                  {% else %}
                                  <div>
                                    
                                    <form action="{% url 'e_nursery:feedback_craft' %}" style="background-color: white;" method="POST" enctype="multipart/form-data">
                                      {% csrf_token %}
                                      <input type="hidden" name="status" value="{{status}}" id=""> 
                                      <input type="hidden" name="prod" value={{id}} id="sel_product">
                                      <input type="hidden" name="type" value="{{p_type}}">
                                      <span class="h4 text-success " style="height: 50px; margin-left: 356px ;margin-bottom: 20px;" id="txt-msg"></span>
                                      <p class="h3 text-danger" style=" margin-left: 340px ;margin-top: 10px;"> Edit Your Feedback</p>
                                      <table style="margin-left: 200px;border-spacing: 20px;border-collapse: separate;">
                                          
                                        <tr>
                                          <td>Your Rating</td>
                                          <td>
                                            
                                             
      
                                                <div name="dv">
                                                  <form id=doRating >
                                                    <button type="button" formnovalidate name="star1" class="fa fa-star fa-2x {% if data.cust_star > 0 %} checked {% endif %}  " value="1" id="first"></button>
                                                    <button type="button" formnovalidate  name="star2" class="fa fa-star fa-2x {% if data.cust_star > 1 %} checked {% endif %}" value="2" id="second"></button>
                                                    <button type="button" formnovalidate  name="star3"  class="fa fa-star fa-2x {% if data.cust_star > 2 %} checked {% endif %}" value="3" id="third"></button>
                                                    <button type="button" formnovalidate  name="star4"  class="fa fa-star fa-2x {% if data.cust_star > 3 %} checked {% endif %}" value="4" id="fourth"></button>
                                                    <button type="button" formnovalidate  name="star15"  class="fa fa-star fa-2x {% if data.cust_star > 4 %} checked {% endif %}" value="5" id="fifth"></button>
                                                    <input type="hidden" name="starCount" id="starCount">
                                                    </form>
                                                  </div>
      
                                          </td>
                                      </tr>
                                        
                                        <tr>
                                              <td>Feedback</td>
                                              <td>
                                                <textarea name="feed_back" required id="" cols="30" rows="10">{{feedback.feedback}}.</textarea>
                                              </td>
                                          </tr>
      <tr>
        <td>Upload Image (optional) </td>
        <td><input type="file" name="pic" id="" class="form-control"></td>
      </tr>
                                          <tr>
                                          <td></td>
                                              
                                              
                                              <td><input class="btn btn-primary" type="submit" value="Submit" ></td>
                                          </tr>
                                      </table>
                                      </form>  
                                  </div>

{% endif %}











                        </div>
                            </div>
                        
                        </div>
         
    
         
      
      <script src="{% static 'js/jquery.min.js' %}"></script>
      <script src="{% static 'js/popper.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'js/jquery-3.0.0.min.js' %}"></script>
      <script src="{% static 'js/plugin.js' %}"></script>
      <!-- sidebar -->
      <script src="{% static 'js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
      <script src="{% static 'js/custom.js' %}"></script>
      <!-- javascript --> 
      <script src="{% static 'js/owl.carousel.js' %}"></script>
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js' %}"></script>
         
      <script>
              $(document).ready(function(){

               $("#qty").change(function(){
                  const url = $("#updateCart").attr("cart-update");
                  const qty = $(this).val(); 
                  var p_id=document.getElementById("product_id").value
                  
                  $.ajax({                      
         url: url,                    
         data: {
             'qty': qty,
             'prod_id':p_id      
         },
         
         success: function (data) {   
          
           window.location.href="/nursery/CustomerHome/Cart";
            
            
         }
     });
                  
               });
              });
      </script>
   <script>
       document.querySelector('#rating').addEventListener('click', function (e) {
    let action = 'add';
    for (const span of this.children) {
        span.classList[action]('active');
        if (span === e.target) action = 'remove';
    }

});
   </script>
   <script>
         $(document).ready(function(){
         $(".fancybox").fancybox({
         openEffect: "none",
         closeEffect: "none"
         });
         
         $(".zoom").hover(function(){
         
         $(this).addClass('transition');
         }, function(){
         
         $(this).removeClass('transition');
         });
         });
         
      </script> 
 
   <script>
              $(document).ready(function(){

               $("button").click(function(){
                 
                var msgBox=document.getElementById('txt-msg')
                // msgBox.setAttribute('style','visibility:visible')
                msgBox.innerHTML="Thanks for your rating";
                setTimeout(() => {
                  
                //  msgBox.setAttribute('style','visibility:hidden')
                 msgBox.innerHTML="";
                }, 2000);
                  // const url = $("#doRating").attr("do-rating");
                  const star = $(this).val(); 
                  const sel_product= product=document.getElementById("sel_product").value
                  
                  document.getElementById('starCount').value=star
                  // var p_id=document.getElementById("p")
                  // var value="";

                  // for(var i=0;i<p_id.length;i++){
                  //    console.log('hai',p_id.item(i).value);
                  // }
                  // Array.prototype.forEach(id => {
                  //    console.log('value',id.value);
                  //    if(id.value!=undefined)
                  //    value=id.value
                  // });
    //               const url="/nursery/CustomerHome/do-rating"
    //               $.ajax({                      
    //      url: url,                    
    //      data: {
    //          'product': sel_product,
    //          'star':star      
    //      },
         
    //      success: function (data) {   
          
           
            
            
    //      }
    //  });
                  
               });
              });
      </script> --> -->



<script>
  const first=document.getElementById("first")
  const second=document.getElementById("second")
  const third=document.getElementById("third")
  const fourth=document.getElementById("fourth")
  const fifth=document.getElementById("fifth")

const star_arr=[first,second,third,fourth,fifth]

const handleSelect=(selected_star)=>{
    switch(selected_star){
        case 'first':{
            first.classList.add('checked')
            second.classList.remove('checked')
            third.classList.remove('checked')
            fourth.classList.remove('checked')
            fifth.classList.remove('checked')
            return
        }

        case 'second':{
            first.classList.add('checked')
               second.classList.add('checked')
            third.classList.remove('checked')
            fourth.classList.remove('checked')
            fifth.classList.remove('checked')
            return
        }
        case 'third':{
            first.classList.add('checked')
            second.classList.add('checked')
            third.classList.add('checked')
            fourth.classList.remove('checked')
            fifth.classList.remove('checked')
            return
        }
        case 'fourth':{
            first.classList.add('checked')
            second.classList.add('checked')
            third.classList.add('checked')
            fourth.classList.add('checked')
            fifth.classList.remove('checked')
            return
        }
        case 'fifth':{
            first.classList.add('checked')
            second.classList.add('checked')
            third.classList.add('checked')
            fourth.classList.add('checked')
            fifth.classList.add('checked')
            return
        }

    }
}



star_arr.forEach(item=>item.addEventListener("click",(event)=>{
   handleSelect(event.target.id)
}))

</script>







   </body>
</html>